
        let qrHistory = JSON.parse(localStorage.getItem('qrHistory')) || [];
        let profile = JSON.parse(localStorage.getItem('profile')) || { name: 'Md Riyad', pic: '' };

        function updateProfile() {
            const name = document.getElementById('name-input').value || 'Md Riyad';
            const file = document.getElementById('pic-input').files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    profile.pic = e.target.result;
                    saveAndDisplayProfile(name);
                };
                reader.readAsDataURL(file);
            } else {
                saveAndDisplayProfile(name);
            }
        }

        function saveAndDisplayProfile(name) {
            profile.name = name;
            localStorage.setItem('profile', JSON.stringify(profile));
            document.getElementById('profile-name').textContent = profile.name;
            document.getElementById('profile-pic').src = profile.pic || 'https://via.placeholder.com/50';
            document.getElementById('name-input').value = '';
            document.getElementById('pic-input').value = '';
        }

        function generateQR() {
            const text = document.getElementById('text-input').value;
            if (!text) return alert('টেক্সট লিখো!');

            const qrPreview = document.getElementById('qr-preview');
            qrPreview.innerHTML = '';
            const qrcode = new QRCode(qrPreview, {
                text: text,
                width: 256,
                height: 256,
                colorDark: "#000000",
                colorLight: "#ffffff",
                correctLevel: QRCode.CorrectLevel.H
            });

            setTimeout(() => {
                const canvas = qrPreview.querySelector('canvas');
                const dataURL = canvas.toDataURL('image/png');
                qrHistory.push({ text, dataURL });
                localStorage.setItem('qrHistory', JSON.stringify(qrHistory));
                loadHistory();
                document.getElementById('download-btn').style.display = 'block';
                document.getElementById('download-btn').setAttribute('data-url', dataURL);
            }, 100);
        }

        function downloadQR() {
            const url = document.getElementById('download-btn').getAttribute('data-url');
            const a = document.createElement('a');
            a.href = url;
            a.download = 'qr-code.png';
            a.click();
        }

        function loadHistory() {
            const historyList = document.getElementById('history-list');
            historyList.innerHTML = '';
            qrHistory.forEach((item, index) => {
                const div = document.createElement('div');
                div.className = 'history-item';
                div.innerHTML = `
                    <span>${item.text}</span>
                    <img src="${item.dataURL}" alt="QR">
                    <button onclick="downloadHistory(${index})">ডাউনলোড</button>
                `;
                historyList.appendChild(div);
            });
        }

        function downloadHistory(index) {
            const item = qrHistory[index];
            const a = document.createElement('a');
            a.href = item.dataURL;
            a.download = `qr-${item.text}.png`;
            a.click();
        }
        function clearHistory(){
  if(confirm('নিশ্চিত?')){ localStorage.removeItem('qrHistory'); renderHistory(); }
}

        // ইনিশিয়াল লোড
        saveAndDisplayProfile(profile.name);
        loadHistory();

        // ================= Hamburger JS =================
        function toggleMenu() {
            document.getElementById("menu").classList.toggle("active");
        }
   
